# This file was auto-generated by the Firebase CLI
# https://github.com/firebase/firebase-tools

name: Deploy to Firebase Hosting on merge
'on':
  push:
    branches:
      - master
jobs:
  build_and_deploy:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - run: |
          mkdir lib/auth
          echo $SECRETS_FILE_CONTENTS | base64 -d > lib/auth/secrets.dart 
          echo $SECRETS_FILE_CONTENTS | base64 -d 
          echo ########
          cd lib/auth
          sudo printf '%b\n' "$(secrets.dart)"
          #sudo snap install flutter --classic
          #flutter channel stable
          #flutter config --enable-web
          #flutter pub get
          #flutter build web
        env:
          SECRETS_FILE_CONTENTS: ${{ secrets.SECRETS_FILE_CONTENTS }}
        
      #- uses: FirebaseExtended/action-hosting-deploy@v0
        #with:
          #repoToken: '${{ secrets.GITHUB_TOKEN }}'
          #firebaseServiceAccount: '${{ secrets.FIREBASE_SERVICE_ACCOUNT_CW_BSMM_PRD }}'
          #channelId: live
          #projectId: cw-bsmm-prd
